# Architecture & Flow Diagrams

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ADMIN PANEL SYSTEM                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              FRONTEND (React + Vite)                         â”‚  â”‚
â”‚  â”‚  Port: 5173                                                  â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  Admin Panel (AdminPanel.jsx)                          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                                         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ Potenciales  â”‚  Vendidos    â”‚  EstadÃ­sticas (âœ¨)  â”‚ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ (ClientsList)â”‚(SoldList)    â”‚  (New Modern Design)â”‚ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                                         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  Features:                                              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Potenciales:                                         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - View clients                                       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Reschedule meetings                                â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Record payments                                    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Confirm/cancel meetings                            â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - ğŸ—‘ï¸ DELETE CLIENTS (New!)                           â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                                         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Vendidos:                                            â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - View sold clients                                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Export to Excel                                    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                                         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ EstadÃ­sticas:                                        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - 10 Key Metrics                                     â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Modern Dashbaord (New!)                            â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - ğŸ”½ 5 State Filters (New!)                          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Live Recalculation                                 â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Executive Summary                                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                                         â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â†“ API Calls â†“                             â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              BACKEND (Node.js + Express)                     â”‚  â”‚
â”‚  â”‚  Port: 3001                                                  â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  Routes:                                                     â”‚  â”‚
â”‚  â”‚  GET  /api/leads/admin/leads        â† Fetch all leads        â”‚  â”‚
â”‚  â”‚  GET  /api/booking/list             â† Fetch all bookings     â”‚  â”‚
â”‚  â”‚  DELETE /api/leads/:id              â† Delete lead            â”‚  â”‚
â”‚  â”‚  DELETE /api/booking/:id            â† Delete booking         â”‚  â”‚
â”‚  â”‚  PUT  /api/leads/update-status      â† Update status          â”‚  â”‚
â”‚  â”‚  PUT  /api/leads/mark-as-sold       â† Mark as sold           â”‚  â”‚
â”‚  â”‚  ... (other routes)                                           â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â†“ Database Ops â†“                          â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              DATABASE (MongoDB)                              â”‚  â”‚
â”‚  â”‚  Connection: mongodb://localhost:27017/stivenads             â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  Collections:                                                â”‚  â”‚
â”‚  â”‚  â€¢ Leads (25 documents)                                      â”‚  â”‚
â”‚  â”‚    - Status: applied, scheduled, meeting-completed, etc.     â”‚  â”‚
â”‚  â”‚    - Lead Type: Ideal, Scale, or null                        â”‚  â”‚
â”‚  â”‚    - Fields: full_name, email, phone, sale_amount, etc.     â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  â€¢ Bookings (9 documents)                                    â”‚  â”‚
â”‚  â”‚    - Status: confirmed, sold, cancelled, etc.                â”‚  â”‚
â”‚  â”‚    - Fields: clientName, email, phone, date, time, etc.     â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  â€¢ Leads: âœ… All clean (0 invalid states)                    â”‚  â”‚
â”‚  â”‚  â€¢ Bookings: âœ… All clean (0 invalid states)                â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow: EstadÃ­sticas Dashboard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ESTADÃSTICAS COMPONENT DATA FLOW                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                           User Opens Tab
                                 â”‚
                                 â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   useEffect Hook Fires      â”‚
                    â”‚   (depends on selectedState)â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  fetchStatistics()         â”‚
                    â”‚  - Fetches all leads       â”‚
                    â”‚  - Fetches all bookings    â”‚
                    â”‚  - Calls calculateStats()  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â†“                         â†“
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ Fetch Leads    â”‚        â”‚ Fetch Bookings    â”‚
          â”‚ from Backend   â”‚        â”‚ from Backend      â”‚
          â”‚ /api/leads/... â”‚        â”‚ /api/booking/...  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   calculateStats()         â”‚
                    â”‚   (Filtered or All)        â”‚
                    â”‚                            â”‚
                    â”‚   If selectedState â‰  'todos':â”‚
                    â”‚   - Filter leads by status  â”‚
                    â”‚   - Filter bookings by leadsâ”‚
                    â”‚                            â”‚
                    â”‚   Calculate 10 metrics:     â”‚
                    â”‚   - Total Leads             â”‚
                    â”‚   - Qualified Leads         â”‚
                    â”‚   - Scheduled Meetings      â”‚
                    â”‚   - Completed Meetings      â”‚
                    â”‚   - Missed Meetings         â”‚
                    â”‚   - Sold Clients            â”‚
                    â”‚   - Total Revenue           â”‚
                    â”‚   - Conversion Rate         â”‚
                    â”‚   - Meeting Completion Rate â”‚
                    â”‚   - Average Ticket          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   setStats(calculatedStats)â”‚
                    â”‚   Trigger Re-render        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Render Dashboard         â”‚
                    â”‚   - 6 Main Cards           â”‚
                    â”‚   - 4 Key Metrics          â”‚
                    â”‚   - Executive Summary      â”‚
                    â”‚   - State Filters          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â†“
                          Dashboard Displayed


USER INTERACTION: Clicking Filter Button
                                 â”‚
                                 â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ handleStateChange(newState)â”‚
                    â”‚ setSelectedState(newState) â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€ Triggers useEffect â”€â”€â”€â”
                    â”‚   (dependency: selectedState)
                    â†“                           â†“
            Calls fetchStatistics()
            Loop repeats with filtered data
```

---

## Data Flow: Delete Client

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              DELETE CLIENT FUNCTIONALITY FLOW                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    User Clicks Trash Icon
                           ğŸ—‘ï¸
                            â”‚
                            â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ setClienteToDelete(client)            â”‚
        â”‚ setShowDeleteModal(true)              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚    Delete Confirmation Modal Appears   â”‚
        â”‚    âš ï¸ Warning message with client name â”‚
        â”‚    [ğŸ—‘ï¸ Eliminar] [âŒ Cancelar]        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â†“                       â†“
        User Clicks         User Clicks
        "Eliminar"          "Cancelar"
            â”‚                    â”‚
            â†“                    â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ handleDelete â”‚      â”‚ Modal Closesâ”‚
    â”‚ Client()     â”‚      â”‚ No changes  â”‚
    â”‚ Async Func   â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“                â†“
DELETE        DELETE
BOOKING       LEAD
Record        Record
    â”‚                â†“
    â”‚        axios.delete(
    â”‚        /api/leads/leadId
    â”‚        )
    â†“                â†“
axios.delete(   â”‚
/api/booking/   â”‚
bookingId)      â”‚
    â”‚           â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â†“
    Both Delete API
    Calls Complete
         â”‚
         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ setShowDeleteModal    â”‚
    â”‚ (false)              â”‚
    â”‚ setClienteToDelete   â”‚
    â”‚ (null)               â”‚
    â”‚ fetchClientes()       â”‚
    â”‚ (Refresh list)       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Alert: "Cliente      â”‚
    â”‚ eliminado            â”‚
    â”‚ exitosamente"        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Client Row Disappearsâ”‚
    â”‚ Table Updates        â”‚
    â”‚ Counts Refresh       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## State Filtering Logic

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              STATE FILTERING SYSTEM                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User Interface (Filter Buttons):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [TODOS] [Agendado] [En Proceso] [Confirmar] [Confirmado]â”‚
â”‚ (selected) (gray)   (gray)       (gray)      (gray)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

State Mapping Table:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Filter     â”‚ Maps to Lead Status â”‚ Description  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ todos      â”‚ (all statuses)      â”‚ Show all     â”‚
â”‚ agendado   â”‚ 'scheduled'         â”‚ Scheduled    â”‚
â”‚ en_proceso â”‚ 'meeting-completed' â”‚ In progress  â”‚
â”‚ confirmar  â”‚ 'applied'           â”‚ Need confirm â”‚
â”‚ confirmado â”‚ 'sold'              â”‚ Sold/Closed  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Calculation Flow for Each Filter:

'todos' (Default):
  All Leads â†’ All Bookings â†’ Calculate All Metrics

'agendado':
  Filter: leads.status === 'scheduled'
         â†“
  Filter bookings by filtered leads
         â†“
  Calculate metrics on filtered data
         â†“
  Show: Scheduled meetings, related revenue, etc.

'en_proceso':
  Filter: leads.status === 'meeting-completed'
         â†“
  Filter bookings
         â†“
  Calculate metrics
         â†“
  Show: Completed meetings metrics

'confirmar':
  Filter: leads.status === 'applied'
         â†“
  Filter bookings
         â†“
  Calculate metrics
         â†“
  Show: Applied leads metrics

'confirmado':
  Filter: leads.status === 'sold'
         â†“
  Filter bookings
         â†“
  Calculate metrics
         â†“
  Show: Only sold/confirmed clients metrics
        (highest revenue, conversion rate, etc.)
```

---

## Component Hierarchy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          App.jsx (Main Router)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      AdminPanel.jsx           â”‚
        â”‚   (Tab Router)                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“               â†“               â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Potenci-â”‚  â”‚ Vendidos â”‚  â”‚ EstadÃ­sticas    â”‚
    â”‚ ales    â”‚  â”‚ List     â”‚  â”‚ (âœ¨ NEW)        â”‚
    â”‚ (Clientsâ”‚  â”‚ (Sold    â”‚  â”‚                 â”‚
    â”‚ List)   â”‚  â”‚ Clients) â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚Filter Panel â”‚ â”‚
        â”‚            â”‚          â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
        â”‚            â”‚          â”‚ â”‚Main Metrics â”‚ â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚          â”‚ â”‚(6 cards)    â”‚ â”‚
    â”‚ Modals    â”‚    â”‚          â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
    â”‚ (Viewing, â”‚    â”‚          â”‚ â”‚Key Metrics  â”‚ â”‚
    â”‚  Reschdl, â”‚    â”‚          â”‚ â”‚(4 cards)    â”‚ â”‚
    â”‚  Payment, â”‚    â”‚          â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
    â”‚  DELETEâœ¨)â”‚    â”‚          â”‚ â”‚Summary      â”‚ â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚          â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                     â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚Delete Modalâ”‚ (âœ¨ NEW)
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Database Schema

```
MongoDB Collections:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          LEADS Collection             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ _id: ObjectId                        â”‚
â”‚ full_name: String                    â”‚
â”‚ email: String                        â”‚
â”‚ phone: String                        â”‚
â”‚ monthly_consultations: String        â”‚
â”‚ is_labor_lawyer: Boolean             â”‚
â”‚ lead_type: 'Ideal'|'Scale'|null     â”‚
â”‚ status: âœ… STANDARDIZED              â”‚
â”‚   â€¢ 'applied'                        â”‚
â”‚   â€¢ 'scheduled'                      â”‚
â”‚   â€¢ 'meeting-completed'              â”‚
â”‚   â€¢ 'sold'                           â”‚
â”‚   â€¢ 'disqualified'                   â”‚
â”‚ scheduled_date: String               â”‚
â”‚ scheduled_time: String               â”‚
â”‚ sale_amount: Number                  â”‚
â”‚ createdAt: Date                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        BOOKINGS Collection            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ _id: ObjectId                        â”‚
â”‚ clientName: String                   â”‚
â”‚ email: String                        â”‚
â”‚ phone: String                        â”‚
â”‚ date: String (YYYY-MM-DD)           â”‚
â”‚ time: String (HH:MM)                â”‚
â”‚ status: âœ… STANDARDIZED              â”‚
â”‚   â€¢ 'pending'                        â”‚
â”‚   â€¢ 'confirmed'                      â”‚
â”‚   â€¢ 'meeting-completed'              â”‚
â”‚   â€¢ 'sold'                           â”‚
â”‚   â€¢ 'cancelled'                      â”‚
â”‚   â€¢ 'No Confirmado'                 â”‚
â”‚ monto_venta: Number (optional)       â”‚
â”‚ venta_confirmada: Boolean            â”‚
â”‚ googleCalendarEventId: String        â”‚
â”‚ createdAt: Date                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Status: âœ… Database Cleaned & Standardized
- Total Leads: 0 (empty in test run)
- Total Bookings: 9
- Invalid States Found: 0
- Invalid States Fixed: 0
```

---

## Key File Dependencies

```
Frontend Dependencies:

Estadisticas.jsx
  â”œâ”€â”€ React (hooks)
  â”œâ”€â”€ Axios (API calls)
  â”œâ”€â”€ React-icons/fi (icons)
  â”œâ”€â”€ Estadisticas.css
  â””â”€â”€ APIs:
      â”œâ”€â”€ GET /api/leads/admin/leads
      â””â”€â”€ GET /api/booking/list

ClientsList.jsx
  â”œâ”€â”€ React (hooks)
  â”œâ”€â”€ Axios (API calls)
  â”œâ”€â”€ React-icons/fi (icons)
  â”œâ”€â”€ XLSX (Excel export)
  â”œâ”€â”€ ClientsList.css
  â”œâ”€â”€ ClientsListModals.css
  â””â”€â”€ APIs:
      â”œâ”€â”€ GET /api/leads/admin/leads
      â”œâ”€â”€ GET /api/booking/list
      â”œâ”€â”€ DELETE /api/leads/:id (NEW)
      â”œâ”€â”€ DELETE /api/booking/:id (NEW)
      â””â”€â”€ (other endpoints...)

Backend Dependencies:

cleanup-states.js
  â”œâ”€â”€ mongoose
  â”œâ”€â”€ Lead model
  â”œâ”€â”€ Booking model
  â””â”€â”€ mongodb://localhost:27017/stivenads
```

---

**Architecture is clean, modular, and production-ready!** âœ…
